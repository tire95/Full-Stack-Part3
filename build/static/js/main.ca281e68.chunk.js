(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(15),o=n.n(c),s=n(3),u=n(6),a=n(2),i=n(4),l=n.n(i),j="/api/persons",d=function(){return l.a.get(j).then((function(e){return e.data}))},b=function(e){return l.a.post(j,e).then((function(e){return e.data}))},f=function(e){return l.a.delete("".concat(j,"/").concat(e)).then((function(e){return!0}))},h=function(e,t){return l.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},m=(n(39),function(e){var t=e.person,n=e.deleteButton;return Object(r.jsxs)("li",{children:[" ",t.name," ",t.number,Object(r.jsx)("button",{onClick:n,children:"Delete"})]})}),O=function(e){var t=e.persons,n=e.deleteButton;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)("ul",{children:t.map((function(e){return Object(r.jsx)(m,{person:e,deleteButton:function(){return n(e.id)}},e.id)}))})]})},v=function(e){var t=e.message;if(e.error){return Object(r.jsx)("div",{style:{color:"red"},className:"message",children:t})}return Object(r.jsx)("div",{className:"message",children:t})},x=function(e){var t=e.persons,n=e.newName,c=e.newNumber,o=e.setPersons,s=e.setNewName,a=e.setNewNumber,i=e.setMessage,l=e.setError;return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Add a new number"}),Object(r.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===n}))){if(window.confirm("".concat(n," is already added to phonebook, replace the old number with a new one?"))){var r=t.find((function(e){return e.name===n})),j=Object(u.a)(Object(u.a)({},r),{},{number:c});h(j.id,j).then((function(e){l(!1),o(t.map((function(t){return t.id!==j.id?t:e}))),s(""),a(""),i("".concat(n," succesfully edited")),setTimeout((function(){i(null)}),5e3)})).catch((function(e){l(!0),s(""),a(""),o(t.filter((function(e){return e.name!==n}))),i("Information on ".concat(n," has already been removed from the server")),setTimeout((function(){i(null)}),5e3)}))}}else b({name:n,number:c}).then((function(e){l(!1),o(t.concat(e)),s(""),a(""),i("".concat(n," succesfully added")),setTimeout((function(){i(null)}),5e3)})).catch((function(e){l(!0),s(""),a(""),console.log(e.response.data),i("Error: ".concat(e.response.data.error)),setTimeout((function(){i(null)}),5e3)}))},children:[Object(r.jsxs)("div",{children:["name:",Object(r.jsx)("input",{value:n,onChange:function(e){console.log(e.target.value),s(e.target.value)}})]}),Object(r.jsxs)("div",{children:["number:",Object(r.jsx)("input",{value:c,onChange:function(e){console.log(e.target.value),a(e.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})]})},p=function(e){var t=e.value,n=e.setNewSearch;return Object(r.jsx)("form",{children:Object(r.jsxs)("div",{children:["filter shown with:",Object(r.jsx)("input",{value:t,onChange:function(e){console.log(e.target.value),n(e.target.value)}})]})})},w=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),i=u[0],l=u[1],j=Object(a.useState)(""),b=Object(s.a)(j,2),h=b[0],m=b[1],w=Object(a.useState)(""),N=Object(s.a)(w,2),g=N[0],y=N[1],S=Object(a.useState)(null),k=Object(s.a)(S,2),B=k[0],C=k[1],E=Object(a.useState)(!1),T=Object(s.a)(E,2),P=T[0],D=T[1],I=g.length>0?n.filter((function(e){return e.name.toLowerCase().startsWith(g.toLowerCase())})):n;Object(a.useEffect)((function(){d().then((function(e){c(e)}))}),[]);var M=function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Do you really want to delete ".concat(t.name,"?"))&&f(e).then((function(r){D(!1),y(""),c(n.filter((function(t){return t.id!==e}))),C("".concat(t.name," succesfully deleted")),setTimeout((function(){C(null)}),5e3)})).catch((function(r){D(!0),c(n.filter((function(t){return t.id!==e}))),l(""),m(""),C("Information on ".concat(t.name," has already been removed from the server")),setTimeout((function(){C(null)}),5e3)}))};return null!==B?Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(v,{message:B,error:P}),Object(r.jsx)(p,{value:g,setNewSearch:y}),Object(r.jsx)(x,{persons:n,newName:i,newNumber:h,setPersons:c,setNewName:l,setNewNumber:m,setMessage:C,setError:D}),Object(r.jsx)("div",{children:Object(r.jsx)(O,{persons:I,deleteButton:M})})]}):Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(p,{value:g,setNewSearch:y}),Object(r.jsx)(x,{persons:n,newName:i,newNumber:h,setPersons:c,setNewName:l,setNewNumber:m,setMessage:C,setError:D}),Object(r.jsx)("div",{children:Object(r.jsx)(O,{persons:I,deleteButton:M})})]})};o.a.render(Object(r.jsx)(w,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.ca281e68.chunk.js.map