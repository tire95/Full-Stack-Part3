(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(15),o=n.n(r),s=n(3),u=n(6),a=n(2),i=n(4),l=n.n(i),j="/api/persons",d=function(){return l.a.get(j).then((function(e){return e.data}))},b=function(e){return l.a.post(j,e).then((function(e){return e.data}))},f=function(e){return l.a.delete("".concat(j,"/").concat(e)).then((function(e){return!0}))},h=function(e,t){return l.a.put("".concat(j,"/").concat(e),t).then((function(e){return e.data}))},m=(n(39),function(e){var t=e.person,n=e.deleteButton;return Object(c.jsxs)("li",{children:[" ",t.name," ",t.number,Object(c.jsx)("button",{onClick:n,children:"Delete"})]})}),O=function(e){var t=e.persons,n=e.deleteButton;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)("ul",{children:t.map((function(e){return Object(c.jsx)(m,{person:e,deleteButton:function(){return n(e.id)}},e.id)}))})]})},v=function(e){var t=e.message;if(e.error){return Object(c.jsx)("div",{style:{color:"red"},className:"message",children:t})}return Object(c.jsx)("div",{className:"message",children:t})},x=function(e){var t=e.persons,n=e.newName,r=e.newNumber,o=e.setPersons,s=e.setNewName,a=e.setNewNumber,i=e.setMessage,l=e.setError;return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Add a new number"}),Object(c.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),t.some((function(e){return e.name===n}))){if(window.confirm("".concat(n," is already added to phonebook, replace the old number with a new one?"))){var c=t.find((function(e){return e.name===n})),j=Object(u.a)(Object(u.a)({},c),{},{number:r});h(j.id,j).then((function(e){l(!1),o(t.map((function(t){return t.id!==j.id?t:e}))),s(""),a(""),i("".concat(n," succesfully edited")),setTimeout((function(){i(null)}),5e3)})).catch((function(e){l(!0),s(""),a(""),o(t.filter((function(e){return e.name!==n}))),i("Information on ".concat(n," has already been removed from the server")),setTimeout((function(){i(null)}),5e3)}))}}else b({name:n,number:r}).then((function(e){l(!1),o(t.concat(e)),s(""),a(""),i("".concat(n," succesfully added")),setTimeout((function(){i(null)}),5e3)})).catch((function(e){l(!0),s(""),a(""),i("".concat(e.message)),setTimeout((function(){i(null)}),5e3)}))},children:[Object(c.jsxs)("div",{children:["name:",Object(c.jsx)("input",{value:n,onChange:function(e){console.log(e.target.value),s(e.target.value)}})]}),Object(c.jsxs)("div",{children:["number:",Object(c.jsx)("input",{value:r,onChange:function(e){console.log(e.target.value),a(e.target.value)}})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})]})},w=function(e){var t=e.value,n=e.setNewSearch;return Object(c.jsx)("form",{children:Object(c.jsxs)("div",{children:["filter shown with:",Object(c.jsx)("input",{value:t,onChange:function(e){console.log(e.target.value),n(e.target.value)}})]})})},p=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),u=Object(s.a)(o,2),i=u[0],l=u[1],j=Object(a.useState)(""),b=Object(s.a)(j,2),h=b[0],m=b[1],p=Object(a.useState)(""),N=Object(s.a)(p,2),g=N[0],y=N[1],S=Object(a.useState)(null),k=Object(s.a)(S,2),B=k[0],C=k[1],T=Object(a.useState)(!1),E=Object(s.a)(T,2),P=E[0],D=E[1],I=g.length>0?n.filter((function(e){return e.name.toLowerCase().startsWith(g.toLowerCase())})):n;Object(a.useEffect)((function(){d().then((function(e){r(e)}))}),[]);var M=function(e){var t=n.find((function(t){return t.id===e}));window.confirm("Do you really want to delete ".concat(t.name,"?"))&&f(e).then((function(c){D(!1),y(""),r(n.filter((function(t){return t.id!==e}))),C("".concat(t.name," succesfully deleted")),setTimeout((function(){C(null)}),5e3)})).catch((function(c){D(!0),r(n.filter((function(t){return t.id!==e}))),l(""),m(""),C("Information on ".concat(t.name," has already been removed from the server")),setTimeout((function(){C(null)}),5e3)}))};return null!==B?Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(v,{message:B,error:P}),Object(c.jsx)(w,{value:g,setNewSearch:y}),Object(c.jsx)(x,{persons:n,newName:i,newNumber:h,setPersons:r,setNewName:l,setNewNumber:m,setMessage:C,setError:D}),Object(c.jsx)("div",{children:Object(c.jsx)(O,{persons:I,deleteButton:M})})]}):Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(w,{value:g,setNewSearch:y}),Object(c.jsx)(x,{persons:n,newName:i,newNumber:h,setPersons:r,setNewName:l,setNewNumber:m,setMessage:C,setError:D}),Object(c.jsx)("div",{children:Object(c.jsx)(O,{persons:I,deleteButton:M})})]})};o.a.render(Object(c.jsx)(p,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.1e4ff729.chunk.js.map